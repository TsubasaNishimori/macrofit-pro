# 【筋トレ × AI】MacroFit Pro：週次の栄養戦略と献立設計を “自動化” する次世代ウェブアプリ

増量（バルク）も減量（カット）も、成功する人は「数字と継続」を支配しています。
しかし現実は――PFC計算が面倒、献立を毎週考えるのがつらい、食材の買い物が非効率、記録が続かない…。

そこで登場するのが **MacroFit Pro**。
あなたの身体データと目標から「PFCターゲット」「体重推移予測」「7日分のAI献立」「買い物リスト」まで一気に生成し、意思決定コストを最小化します。

> “考える時間” を “やり切る時間” に変える、トレーニング特化型 AI 栄養コーチ。

---

## 🔥 何ができるのか（概要）

| カテゴリ | 内容 |
|----------|------|
| PFC自動算出 | 目標・活動量から最適なカロリーと三大栄養素割り当て |
| 体重推移予測 | 目標達成までの週次シミュレーション（達成予定日表示） |
| AI献立生成 | Azure OpenAI による 7 日 × 3 or 4 食などの構造化レシピ案 |
| 買い物リスト | 献立から食材を集計しカテゴリ別に統合 |
| プラン再生成 | 条件変更や微修正後に即再生成 |
| 会話型コーチング | “スパルタ系トレーナー” / “癒し系おばあちゃん” 2モード相談チャット |
| データ初期化 | ワンクリックでセッションリセット（検証や再入力が速い） |

---

## 🧠 MacroFit Pro が解決する「よくある課題」

| 悩み | 従来の状態 | MacroFit Pro なら |
|------|------------|------------------|
| PFC設定が雑 | 「なんとなく」で数字がブレる | 定式化されたロジックで一貫性 |
| 体重の停滞 | 未来が見えず不安 | 到達週・日付をシミュレーション |
| 献立マンネリ | 同じ食材・味付けに飽きる | AIが栄養バランスと多様性を両立 |
| 買い物が非効率 | 冷蔵庫に余りがち | 集計済みリストでムダ減少 |
| モチベ維持 | 一人で継続が難しい | 会話AIが日々の伴走 |
| タスク過多 | 計算/記録/発想が重い | 思考コスト → 実行コストへ転換 |

---

## 🖥 画面イメージ（構成）

1. 入力フォーム：年齢 / 性別 / 身長 / 体重 / 目標体重 / 期間 or カロリー方式 / 活動レベル
2. 結果ダッシュボード：  
   - PFCターゲット  
   - 予測体重推移  
   - 達成予定週 & 日付  
3. AI献立 & 買い物リスト生成ボタン  
4. 相談チャット（トレーナー / おばあちゃん）  

---

## 🤖 会話型モード（2つの人格AI）

| モード | 特徴 | 温度設定 | 使いどころ |
|--------|------|----------|-------------|
| トレーナー | スパルタ指導 / 言い訳を許さない / コマンド調 | 低め (0.3) | 追い込み・ブレ制御 |
| おばあちゃん | 関西弁 / 優しい共感 / “無理せんでええよ” | やや高め (0.7) | メンタル回復・安心感 |

> 同じ進捗報告でも全く違うフィードバックが返るので、気分に応じて切り替え可能。

---

## ⚙️ 技術スタック

| レイヤ | 採用技術 | 備考 |
|--------|----------|------|
| フロント | Next.js 14 / React / TypeScript | App Router構成 |
| UI | Tailwind CSS | 低コストで高速実装 |
| AI | Azure OpenAI (GPT-4o-mini) | 低レイテンシ & 安定 API |
| 状態 | React Hooks / SessionStorage | 初期MVP段階（DB未導入） |
| API | Next.js Route Handlers | AI献立 / チャット等 |
| 将来拡張 | Prisma + PostgreSQL | 食材 DB / 履歴学習など |

---

## 🧪 クイックスタート

```bash
# リポジトリ取得
git clone https://github.com/TsubasaNishimori/macrofit-pro.git
cd macrofit-pro

# 依存関係
npm install

# 環境変数を .env.local に設定
# （例）
# AZURE_OPENAI_ENDPOINT=...
# AZURE_OPENAI_API_KEY=...

# 開発起動
npm run dev
# -> http://localhost:3000
```

---

## 🔍 生成ロジック（概要）

### 栄養計算フロー
1. BMR（基礎代謝）：Mifflin-St Jeor 近似式  
2. TDEE：活動レベル係数で補正  
3. 目標差分：増量 / 減量 / 維持  
4. PFC配分：標準またはカスタム比率  
5. 週次体重推移：カロリー差 → 週単位の推移 → 達成推定日

### AI献立生成
- 入力：PFCターゲット / 食数 / 好みの制約（将来拡張予定）  
- 出力：日×食 × (メニュー名 / 概要 / 食材 / 推定PFC)  
- ポスト処理：食材名と分量を正規化 → 集計 → 買い物カテゴリ分類（拡張余地あり）

---

## 📦 デプロイオプション

| 方法 | 利点 | 補足 |
|------|------|------|
| Vercel | 最速 & 最小Ops | 推奨 |
| Docker | ポータビリティ | K8s展開も視野 |
| Azure App Service | Azure集中管理 | GitHub Actions 連携容易 |

---

## 🛡 セキュリティ & コスト最適化

- APIキーは **環境変数** 管理（Git追跡禁止）
- レート超過防止：呼び出し回数制限 UI（将来）
- トークン節約：プロンプトの簡潔化 / モデル選択切替（GPT-3.5系 fallback）
- ロギング：生成失敗時は Azure Metrics 参照

---

## 🧭 ロードマップ（予定）

| フェーズ | 内容 |
|----------|------|
| v0.x | MVP（現在） |
| v1.0 | 認証 / DB永続化 / 献立履歴 |
| v1.1 | 食材DB × 栄養価リアル計算 |
| v1.2 | レコメンド（嗜好学習） |
| v2.0 | 機械学習プラン最適化 / マルチ言語 |

---

## 🗣 こんな人に刺さる

- 減量 or 増量を “仕組み化” したい社会人トレーニー
- 数字管理が得意ではないが、成果は出したい人
- 料理のバリエーションが続かない人
- メンタル波の影響でモチベが乱れがちな人
- コーチングコストを抑えたいパーソナルトレーナーの補助ツール

---

## 🧵 相談AIの使い分け例

| あなたの状態 | 選ぶAI | 期待効果 |
|--------------|--------|----------|
| 今日はサボり気味…。喝が欲しい | トレーナー | 行動促進 / 決意強化 |
| 疲れて気持ちが切れそう | おばあちゃん | 回復 / 情緒安定 |
| 計画の微調整が必要 | トレーナー | 数字ベース助言 |
| 続けられるか不安になった | おばあちゃん | 共感的リフレーミング |

---

## 💬 利用イメージ（チャット例）

> あなた: 「今日は仕事で帰りが遅くてプロテインだけです…」  
> トレーナーAI: 「理由はどうあれ摂取量が足りない。最低限の固形たんぱくを準備しておけ。明日は挽回しろ。」  
> おばあちゃんAI: 「遅くまでおつかれさんやねぇ。無理はあかんよ。明日の朝は消化ええ卵とオートミールで整えたら十分やで。」  

---

## ✅ チェックリスト（導入完了の目安）

- [ ] 目標と現在値から PFC が自動表示される  
- [ ] 達成予定日の表示に納得感がある  
- [ ] 7日分献立がブレなく生成される  
- [ ] 買い物リストで “余り” が減った  
- [ ] チャットAIが行動リズムの役に立っている  

---

## 🤝 コントリビューション歓迎

Pull Request / Issue 提案大歓迎です。  
命名規約: Conventional Commits（例: `feat:`, `fix:`, `docs:`）。  
改善アイデア（食材マッピング / トレーニング連携 / マクロ周期制御 など）もぜひ。

---

## 📎 リンク（仮）

- リポジトリ: https://github.com/TsubasaNishimori/macrofit-pro
- デモ（予定）: （デプロイ後に追記）
- 問い合わせ: （連絡先 or Issue利用）

---

## 🏁 まとめ

MacroFit Pro は “栄養と意思決定の摩擦” を取り除き、  
あなたの「継続する力」に集中させるための **AI駆動フィットネス栄養基盤** です。  

数字と習慣を、もっと軽く。  
次の1週間を、今日ここからデザインしよう。

> さぁ、あなたの “理想の体” をシステム化しよう。  
